<% layout("layouts/main") %>

<div class="min-h-[calc(100vh-4rem)] flex items-center justify-center py-12 px-4">
  <div class="w-full max-w-2xl">
    <!-- Main Card -->
    <div class="bg-white/80 backdrop-blur-lg rounded-3xl shadow-2xl border border-white/60 p-8 sm:p-10">

      <%- include("../../partials/auth/header", {
        title: "Create New Application",
        subtitle: "Set up OAuth credentials and configure access for your application."
      }) %>

      <%- include("../../partials/auth/alert", {success, error}) %>

      <form method="POST" action="/api/client" class="space-y-6 mt-8">

        <%- include("../../partials/form/input", {
          id: "name",
          name: "name",
          type: "text",
          label: "Application Name",
          placeholder: "My Awesome App",
          required: true,
          autocomplete: "name",
          helperText: "A friendly name to identify your application"
        }) %>

        <%- include("../../partials/form/input", {
          id: "slug",
          name: "slug",
          type: "text",
          label: "Application Domain",
          placeholder: "myapp",
          required: true,
          autocomplete: "slug",
          helperText: "This will be used as: myapp.authura.com"
        }) %>

        <%- include("../../partials/form/select", {
          id: "client_type",
          name: "client_type",
          label: "Client Type",
          required: true,
          options: [
            { value: "CONFIDENTIAL", label: "Confidential (Server-side apps)" },
            { value: "PUBLIC", label: "Public (SPAs / Mobile apps)" }
          ],
          helperText: "Determines authentication method and security requirements"
        }) %>

        <%- include("../../partials/form/input", {
          id: "redirect_uri",
          name: "redirect_uri",
          type: "url",
          label: "Redirect URI",
          placeholder: "https://myapp.com/oauth/callback",
          required: true,
          autocomplete: "redirect_uri",
          helperText: "Must exactly match the URI used during OAuth authorization"
        }) %>

        <!-- Info Box -->
        <div class="rounded-xl border-l-4 border-sky-500 bg-linear-to-r from-sky-50 to-sky-50/50 p-4">
          <div class="flex items-start gap-3">
            <svg class="w-5 h-5 text-sky-600 shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <div class="flex-1">
              <p class="text-sm font-semibold text-sky-900">What happens next?</p>
              <p class="text-xs text-sky-800 mt-1">After creating your application, you'll receive a Client ID and optionally a Client Secret for authentication.</p>
            </div>
          </div>
        </div>

        <div class="flex items-center justify-end gap-3 pt-4">
          <a href="/user" class="text-sm font-medium text-slate-600 hover:text-slate-900 transition-colors">
            Cancel
          </a>

          <%- include("../../partials/form/button", {
            type: "submit",
            text: "Create Application",
            variant: "primary",
            size: "lg"
          }) %>
        </div>

      </form>
    </div>
  </div>
</div>
