<% layout("layouts/main") %>

<div class="min-h-[calc(100vh-4rem)] flex items-center justify-center py-12 px-4">
  <div class="w-full max-w-md">
    <!-- Main Card -->
    <div class="bg-white/80 backdrop-blur-lg rounded-3xl shadow-2xl border border-white/60 p-8 sm:p-10">

      <%- include("../../partials/auth/header", {
        title: "Set new password",
        subtitle: "Please enter your new password below."
      }) %>

      <%- include("../../partials/auth/alert", { success, error }) %>

      <form method="POST" action="/api/auth/reset-password" class="space-y-5">
        <% if (!resetToken) { %>
        <div class="rounded-2xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-900">
          This reset link is missing or invalid. Please request a new one.
          <a href="/forgot-password" class="font-semibold text-amber-900 underline underline-offset-2 hover:text-amber-700">
            Back to forgot password
          </a>
          or
          <a href="/account" class="font-semibold text-amber-900 underline underline-offset-2 hover:text-amber-700">
            Back to account
          </a>
        </div>
        <% } %>

        <input type="hidden" name="token" value="<%= resetToken || '' %>">

        <%- include("../../partials/form/input", {
          id: "password",
          name: "password",
          type: "password",
          label: "New password",
          required: true,
          autocomplete: "new-password",
          placeholder: "••••••••",
          helperText: "Must be at least 8 characters"
        }) %>

        <%- include("../../partials/form/input", {
          id: "confirmPassword",
          name: "confirmPassword",
          type: "password",
          label: "Confirm new password",
          required: true,
          autocomplete: "new-password",
          placeholder: "••••••••"
        }) %>

        <div class="pt-2">
          <%- include("../../partials/form/button", {
            type: "submit",
            text: "Reset password",
            variant: "primary",
            fullWidth: true,
            size: "lg"
          }) %>
        </div>

      </form>

    </div>
  </div>
</div>
