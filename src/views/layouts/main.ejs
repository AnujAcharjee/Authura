<!DOCTYPE html>
<html lang="en">

<head>
  <%- partial("../partials/head", { title }) %>
</head>

<body class="bg-linear-to-br from-slate-50 via-white to-orange-50/30 min-h-screen text-slate-800 antialiased">

  <!-- Background Pattern -->
  <div class="fixed inset-0 -z-10 overflow-hidden pointer-events-none">
    <!-- Gradient Orbs -->
    <div class="absolute top-0 -right-32 w-96 h-96 bg-linear-to-br from-orange-200/40 to-orange-400/20 rounded-full blur-3xl animate-float"></div>
    <div class="absolute bottom-0 -left-32 w-96 h-96 bg-linear-to-tr from-sky-200/40 to-sky-400/20 rounded-full blur-3xl animate-float-delayed"></div>
    <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-linear-to-br from-orange-100/30 to-transparent rounded-full blur-3xl animate-pulse-slow"></div>
    
    <!-- Grid Pattern -->
    <svg class="absolute inset-0 w-full h-full opacity-[0.03]" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <pattern id="grid" width="32" height="32" patternUnits="userSpaceOnUse">
          <path d="M 32 0 L 0 0 0 32" fill="none" stroke="currentColor" stroke-width="1"/>
        </pattern>
      </defs>
      <rect width="100%" height="100%" fill="url(#grid)" />
    </svg>
  </div>

  <!-- Page Content -->
  <main class="relative z-10 w-full min-h-screen flex flex-col">
    <div class="flex-1 px-4 py-8 flex justify-center items-start">
      <div class="w-full max-w-6xl">
        <%- body %>
      </div>
    </div>
  </main>

  <!-- Global Styles for Animations -->
  <style>
    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      50% { transform: translateY(-20px) rotate(5deg); }
    }

    @keyframes float-delayed {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      50% { transform: translateY(-25px) rotate(-5deg); }
    }

    @keyframes pulse-slow {
      0%, 100% { opacity: 0.3; }
      50% { opacity: 0.5; }
    }

    .animate-float {
      animation: float 8s ease-in-out infinite;
    }

    .animate-float-delayed {
      animation: float-delayed 10s ease-in-out infinite;
      animation-delay: 2s;
    }

    .animate-pulse-slow {
      animation: pulse-slow 6s ease-in-out infinite;
    }

    /* Custom scrollbar */
    .scrollbar-thin::-webkit-scrollbar {
      height: 4px;
    }

    .scrollbar-thin::-webkit-scrollbar-track {
      background: transparent;
    }

    .scrollbar-thin::-webkit-scrollbar-thumb {
      background: rgb(203 213 225);
      border-radius: 2px;
    }

    .scrollbar-thin::-webkit-scrollbar-thumb:hover {
      background: rgb(148 163 184);
    }
  </style>

  <!-- Global Scripts -->
  <script>
    // Copy to clipboard functionality
    async function copyToClipboard(text, buttonElement) {
      try {
        await navigator.clipboard.writeText(text);
        showCopySuccess(buttonElement);
      } catch {
        // Fallback for older browsers
        const textarea = document.createElement('textarea');
        textarea.value = text;
        textarea.style.position = 'fixed';
        textarea.style.opacity = '0';
        document.body.appendChild(textarea);
        textarea.select();
        document.execCommand('copy');
        document.body.removeChild(textarea);
        showCopySuccess(buttonElement);
      }
    }

    function showCopySuccess(element) {
      if (!element) return;
      const originalHTML = element.innerHTML;
      element.innerHTML = `
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
        </svg>
      `;
      element.classList.add('text-green-600');
      setTimeout(() => {
        element.innerHTML = originalHTML;
        element.classList.remove('text-green-600');
      }, 2000);
    }

    // Client secret rotation
    async function rotateSecret(clientId) {
      if (!confirm('This will invalidate the current secret. Continue?')) return;
      
      try {
        const response = await fetch(`/api/client/${clientId}`, {
          method: 'PUT',
          headers: { 'Content-Type': 'application/json' }
        });
        
        if (response.ok) {
          location.reload();
        } else {
          alert('Failed to rotate secret. Please try again.');
        }
      } catch (error) {
        alert('An error occurred. Please try again.');
      }
    }
  </script>

</body>

</html>
